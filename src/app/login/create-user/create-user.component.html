<div class="container">
  <h2>Add New User</h2>
  <div id="liveAlertPlaceholder"></div>
  <div class="form-container" [ngClass]="{ transparent: spinnerVisible }">
    <div class="spinner-container" *ngIf="spinnerVisible">
      <div class="d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>
    <form
      (ngSubmit)="save()"
      class="row g-3"
      [formGroup]="userForm"
      #form="ngForm"
    >
      <div class="col-md-4">
        <label for="firstName" class="form-label">First Name</label>
        <input
          formControlName="firstName"
          type="text"
          class="form-control"
          id="firstName"
        />
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['firstName'].hasError('required') &&
            userForm.controls['firstName'].touched
          "
        >
          Enter first name
        </div>
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['firstName'].hasError('minlength') &&
            userForm.controls['firstName'].touched
          "
        >
          Please enter at least 3 characters
        </div>
      </div>
      <div class="col-md-4">
        <label for="lastName" class="form-label">Last Name</label>
        <input
          formControlName="lastName"
          type="text"
          class="form-control"
          id="lastName"
        />
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['lastName'].hasError('required') &&
            userForm.controls['lastName'].touched
          "
        >
          Enter last name
        </div>
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['lastName'].hasError('minlength') &&
            userForm.controls['lastName'].touched
          "
        >
          Please enter at least 3 characters
        </div>
      </div>
      <div class="col-md-4">
        <label for="username" class="form-label">User Name</label>
        <input
          formControlName="username"
          type="text"
          class="form-control"
          id="username"
        />
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['username'].hasError('required') &&
            userForm.controls['username'].touched
          "
        >
          Enter username
        </div>
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['username'].hasError('minlength') &&
            userForm.controls['username'].touched
          "
        >
          Please enter at least 3 characters
        </div>
      </div>
      <div class="col-md-4">
        <label for="gender" class="form-label">Gender</label>
        <select formControlName="gender" class="form-select" id="gender">
          <option value="">Select Gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['gender'].hasError('required') &&
            userForm.controls['gender'].touched
          "
        >
          Gender is required
        </div>
      </div>

      <div class="col-sm">
        <label for="dob" class="form-label">DOB</label>
        <input
          formControlName="dob"
          type="date"
          class="form-control"
          id="dob"
        />
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['dob'].hasError('required') &&
            userForm.controls['dob'].touched
          "
        >
          Date of birth is required
        </div>
      </div>

      <div class="col-sm">
        <label for="age" class="form-label">Age</label>
        <input
          formControlName="age"
          type="text"
          class="form-control"
          id="age"
        />
      </div>
      <div class="col-md-6">
        <label for="email" class="form-label">Email</label>
        <input
          formControlName="email"
          type="email"
          class="form-control"
          id="email"
        />
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['email'].hasError('required') &&
            userForm.controls['email'].touched
          "
        >
          Enter email
        </div>
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['email'].hasError('email') &&
            userForm.controls['email'].touched
          "
        >
          Invalid email address
        </div>
      </div>
      <div class="col-md-6">
        <label for="phone" class="form-label">Phone Number</label>
        <input
          formControlName="phone"
          type="text"
          class="form-control"
          id="phone"
        />
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['phone'].hasError('required') &&
            userForm.controls['phone'].touched
          "
        >
          Enter phone number
        </div>
        <div
          class="text-danger"
          *ngIf="
            (userForm.controls['phone'].hasError('minlength') ||
              userForm.controls['phone'].hasError('maxlength')) &&
            userForm.controls['phone'].touched
          "
        >
          Phone number must be 10 digits long
        </div>
      </div>

      <div class="col-md-6">
        <label for="password" class="form-label">Password</label>
        <input
          formControlName="password"
          type="password"
          class="form-control"
          id="password"
        />
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['password'].hasError('required') &&
            userForm.controls['password'].touched
          "
        >
          Password is required
        </div>
        <div
          class="text-danger"
          *ngIf="
            userForm.controls['password'].hasError('minlength') &&
            userForm.controls['password'].touched
          "
        >
          Password must be at least 3 characters
        </div>
      </div>

      <div class="col-md-6">
        <label for="confirmPassword" class="form-label">Confirm Password</label>
        <input
          formControlName="confirmPassword"
          type="password"
          class="form-control"
          id="confirmPassword"
        />
        <div
          class="text-danger"
          *ngIf="
            userForm.hasError('passwordsNotMatching') &&
            userForm.controls['confirmPassword'].touched
          "
        >
          Passwords do not match
        </div>
      </div>

      <div class="d-grid gap-2 col-6 mx-auto mt-5">
        <button
          class="btn btn-outline-primary"
          [disabled]="!userForm.valid"
          type="submit"
        >
          Submit
        </button>
        <p *ngIf="!userForm.valid" class="text-center">
          Please fill all above fields to submit
        </p>
      </div>
    </form>
  </div>
</div>
